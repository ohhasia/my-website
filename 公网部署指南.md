# 🌐 农链通 - 公网部署完整指南

> 将项目部署到公网，让全球用户访问

---

## 📋 目录

1. [部署方案对比](#部署方案对比)
2. [方案一：Vercel部署（推荐，免费）](#方案一vercel部署推荐免费)
3. [方案二：GitHub Pages（免费）](#方案二github-pages免费)
4. [方案三：云服务器部署（阿里云/腾讯云）](#方案三云服务器部署阿里云腾讯云)
5. [域名配置](#域名配置)
6. [ICP备案流程](#icp备案流程)
7. [常见问题](#常见问题)

---

## 🚀 部署方案对比

| 方案 | 价格 | 难度 | 速度 | 备案 | 推荐度 | 适合场景 |
|------|------|------|------|------|--------|----------|
| **Vercel** | 免费 | ⭐ | ⭐⭐⭐⭐⭐ | ❌ 不需要 | ⭐⭐⭐⭐⭐ | 个人项目、快速上线 |
| **GitHub Pages** | 免费 | ⭐ | ⭐⭐⭐ | ❌ 不需要 | ⭐⭐⭐⭐ | 个人项目、开源项目 |
| **云服务器** | 50-100元/月 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ✅ 必须 | ⭐⭐⭐⭐ | 商业项目、长期运营 |
| **虚拟主机** | 30-80元/年 | ⭐⭐ | ⭐⭐⭐ | ✅ 必须 | ⭐⭐⭐ | 小型网站、新手 |

---

## 🎯 推荐方案

### 🌟 对于你的项目，我强烈推荐 **Vercel部署**

**理由：**
- ✅ 完全免费
- ✅ 无需备案
- ✅ 全球CDN加速
- ✅ 自动部署
- ✅ HTTPS自动配置
- ✅ 几分钟完成部署

---

## 📦 方案一：Vercel部署（推荐，免费）

### 步骤1：准备GitHub仓库

#### 1.1 注册GitHub账号

**访问：** https://github.com/join

填写信息：
- Username（用户名）
- Email（邮箱）
- Password（密码）

#### 1.2 安装Git

**下载地址：** https://git-scm.com/downloads

**验证安装：**
```bash
git --version
```

#### 1.3 初始化本地仓库

打开命令行，进入项目目录：

```bash
cd C:\Users\1234\Desktop\12222
```

初始化Git：
```bash
git init
git add .
git commit -m "first commit: 农链通商城版"
```

#### 1.4 推送到GitHub

在GitHub创建仓库（https://github.com/new）：
- Repository name: `nongliantong`
- Description: `农链通 - 农产品交易服务平台`
- Public（公开）

添加远程仓库并推送：
```bash
git branch -M main
git remote add origin https://github.com/你的用户名/nongliantong.git
git push -u origin main
```

### 步骤2：Vercel部署

#### 2.1 访问Vercel

**官网：** https://vercel.com/

**登录：** 使用GitHub账号登录

#### 2.2 导入项目

1. 点击 **"New Project"**
2. 选择 **"Import Git Repository"**
3. 选择你的GitHub仓库 `nongliantong`
4. 点击 **"Import"**

#### 2.3 配置项目

**Project Name：** `nongliantong`

**Framework Preset：** 选择 `Other`

**Build and Output Settings：**
- Build Command：留空
- Output Directory：留空
- Install Command：留空

**Environment Variables：** 不需要

点击 **"Deploy"**

#### 2.4 等待部署

部署过程约1-2分钟，看到 **"Congratulations!"** 表示部署成功。

#### 2.5 访问网站

部署成功后，Vercel会提供访问地址：
```
https://nongliantong.vercel.app
```

### 步骤3：自定义域名（可选）

#### 3.1 购买域名

**推荐平台：**
- 阿里云：https://wanwang.aliyun.com/
- 腾讯云：https://cloud.tencent.com/product/dnspod
- Namecheap：https://www.namecheap.com/

**建议域名：**
- `nongliantong.site`
- `nongliantong.store`
- `nongliantong.app`

**价格：** 约10-30元/年

#### 3.2 配置域名

1. 在Vercel项目中，点击 **"Settings"** → **"Domains"**
2. 输入你的域名：`nongliantong.site`
3. 点击 **"Add"**
4. Vercel会显示DNS记录

#### 3.3 配置DNS

在域名注册商添加DNS记录：

| 类型 | 主机记录 | 记录值 | TTL |
|------|----------|--------|-----|
| CNAME | @ | cname.vercel-dns.com | 5分钟 |

等待DNS生效（约5-30分钟），Vercel会自动配置HTTPS。

### ✅ 部署完成

现在你的网站已经可以通过以下地址访问：
- `https://nongliantong.vercel.app`
- `https://nongliantong.site`（如果配置了自定义域名）

---

## 📦 方案二：GitHub Pages（免费）

### 步骤1：准备GitHub仓库

同方案一的步骤1

### 步骤2：配置GitHub Pages

1. 进入GitHub仓库
2. 点击 **"Settings"**（设置）
3. 找到 **"GitHub Pages"** 选项
4. **Source** 选择：
   - Branch：`main`
   - Folder：`/(root)`
5. 点击 **"Save"**

### 步骤3：等待部署

部署约1-2分钟，访问地址：
```
https://你的用户名.github.io/nongliantong/
```

### 步骤4：自定义域名（可选）

1. 在仓库根目录创建 `CNAME` 文件
2. 文件内容：`你的域名.com`
3. 配置DNS解析：
   - 类型：A
   - 主机记录：@
   - 记录值：185.199.108.153（GitHub Pages IP）

---

## 📦 方案三：云服务器部署（阿里云/腾讯云）

### 步骤1：购买云服务器

#### 1.1 选择云服务商

**阿里云：** https://www.aliyun.com/product/ecs
**腾讯云：** https://cloud.tencent.com/product/cvm
**华为云：** https://www.huaweicloud.com/product/ecs.html

#### 1.2 配置选择

**基础配置：**
- 地域：选择离你近的地区（如上海、北京）
- 实例：突发性能型或共享型
- CPU：1核
- 内存：2GB
- 带宽：1-3Mbps
- 系统盘：40GB高效云盘
- 操作系统：CentOS 7.6 或 Ubuntu 18.04

**价格：** 约50-100元/月

#### 1.3 购买流程

1. 选择配置
2. 设置密码（记住密码！）
3. 购买
4. 获取公网IP

### 步骤2：连接服务器

#### 2.1 Windows系统

**使用PuTTY：**
- 下载：https://www.putty.org/
- Host Name：你的服务器IP
- Port：22
- 点击Open
- 用户名：root
- 密码：你的服务器密码

**使用PowerShell：**
```bash
ssh root@你的服务器IP
```

### 步骤3：安装Nginx

#### 3.1 CentOS系统

```bash
# 更新软件包
yum update -y

# 安装Nginx
yum install nginx -y

# 启动Nginx
systemctl start nginx
systemctl enable nginx

# 查看状态
systemctl status nginx
```

#### 3.2 Ubuntu系统

```bash
# 更新软件包
apt update

# 安装Nginx
apt install nginx -y

# 启动Nginx
systemctl start nginx
systemctl enable nginx
```

### 步骤4：上传项目文件

#### 方法1：使用FileZilla（推荐）

**下载：** https://filezilla-project.org/

**配置：**
- Host：你的服务器IP
- Port：22
- Protocol：SFTP
- Logon Type：Normal
- User：root
- Password：你的服务器密码

**上传：**
1. 连接服务器
2. 左侧：本地项目目录 `C:\Users\1234\Desktop\12222`
3. 右侧：服务器目录 `/usr/share/nginx/html/`
4. 拖拽上传整个 `12222` 文件夹

#### 方法2：使用scp命令

```bash
scp -r C:\Users\1234\Desktop\12222 root@你的服务器IP:/usr/share/nginx/html/
```

### 步骤5：配置Nginx

#### 5.1 编辑配置文件

```bash
vim /etc/nginx/conf.d/default.conf
```

按 `i` 进入编辑模式，粘贴以下内容：

```nginx
server {
    listen 80;
    server_name 你的服务器IP;

    root /usr/share/nginx/html/12222;
    index index.html;

    # Gzip压缩
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/javascript application/json;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # 静态资源缓存
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

按 `Esc`，输入 `:wq` 保存退出。

#### 5.2 测试配置

```bash
nginx -t
```

显示 `nginx: configuration file /etc/nginx/nginx.conf test is successful` 表示配置正确。

#### 5.3 重启Nginx

```bash
systemctl restart nginx
```

### 步骤6：配置防火墙

#### 6.1 CentOS 7

```bash
# 开放80端口
firewall-cmd --permanent --add-port=80/tcp

# 开放443端口（HTTPS）
firewall-cmd --permanent --add-port=443/tcp

# 重启防火墙
firewall-cmd --reload

# 查看开放的端口
firewall-cmd --list-ports
```

#### 6.2 Ubuntu

```bash
# 启用防火墙
ufw enable

# 开放80端口
ufw allow 80/tcp

# 开放443端口
ufw allow 443/tcp

# 查看状态
ufw status
```

### 步骤7：配置安全组

在云服务器控制台配置安全组：

1. 进入云服务器管理
2. 找到 **"安全组"**
3. 添加规则：
   - 端口范围：80/80
   - 协议：TCP
   - 授权对象：0.0.0.0/0
   - 端口范围：443/443
   - 协议：TCP
   - 授权对象：0.0.0.0/0

### 步骤8：测试访问

在浏览器输入你的服务器IP：
```
http://你的服务器IP
```

应该能看到农链通网站首页。

### 步骤9：配置HTTPS（推荐）

#### 9.1 安装Certbot

**CentOS：**
```bash
yum install certbot python2-certbot-nginx -y
```

**Ubuntu：**
```bash
apt install certbot python3-certbot-nginx -y
```

#### 9.2 获取SSL证书

```bash
certbot --nginx -d 你的域名
```

按提示操作：
1. 输入邮箱
2. 同意条款
3. 是否分享邮箱：N
4. 是否自动配置HTTPS：2（Redirect）

#### 9.3 自动续期

证书有效期3个月，Certbot会自动续期：
```bash
certbot renew --dry-run
```

### ✅ 部署完成

现在可以通过以下地址访问：
- `http://你的服务器IP`
- `https://你的域名`（如果配置了域名和HTTPS）

---

## 🔧 域名配置

### 1. 购买域名

**推荐平台：**
- 阿里云：https://wanwang.aliyun.com/
- 腾讯云：https://cloud.tencent.com/product/dnspod
- Namecheap：https://www.namecheap.com/
- GoDaddy：https://www.godaddy.com/

**建议域名后缀：**
- `.com` - 最常用，约50-100元/年
- `.cn` - 国内域名，需要备案，约30-80元/年
- `.site` - 新顶级域，约10-30元/年
- `.store` - 商店域名，约10-30元/年
- `.app` - 应用域名，约20-50元/年

### 2. 域名解析

#### 2.1 云服务器解析

**添加A记录：**
| 类型 | 主机记录 | 记录值 | TTL |
|------|----------|--------|-----|
| A | @ | 你的服务器IP | 5分钟 |
| A | www | 你的服务器IP | 5分钟 |

#### 2.2 Vercel解析

**添加CNAME记录：**
| 类型 | 主机记录 | 记录值 | TTL |
|------|----------|--------|-----|
| CNAME | @ | cname.vercel-dns.com | 5分钟 |

#### 2.3 GitHub Pages解析

**添加A记录：**
| 类型 | 主机记录 | 记录值 | TTL |
|------|----------|--------|-----|
| A | @ | 185.199.108.153 | 5分钟 |
| A | @ | 185.199.109.153 | 5分钟 |
| A | @ | 185.199.110.153 | 5分钟 |
| A | @ | 185.199.111.153 | 5分钟 |

---

## ⚠️ ICP备案流程

### 重要说明

**⚠️ 国内服务器必须备案，否则网站无法访问！**

**✅ Vercel/GitHub Pages不需要备案**

### 备案流程

#### 1. 准备材料

- ✅ 个人身份证正反面照片（清晰）
- ✅ 网站备案真实性核验单（打印填写）
- ✅ 域名证书（从域名注册商获取）
- ✅ 手机号码（接收验证码）

#### 2. 提交备案

**通过云服务商提交：**

**阿里云备案：**
1. 登录阿里云控制台
2. 找到 **"ICP备案"**
3. 点击 **"开始备案"**
4. 填写信息：
   - 主体信息（个人信息）
   - 网站信息（网站名称、域名等）
   - 上传材料
5. 提交初审

**腾讯云备案：**
1. 登录腾讯云控制台
2. 找到 **"备案中心"**
3. 点击 **"立即备案"**
4. 填写信息并提交

#### 3. 等待审核

**审核流程：**
1. **服务商初审：** 1-3个工作日
2. **管局审核：** 10-20个工作日
3. **备案成功：** 收到短信和邮件通知

**审核状态查询：**
- 工信部备案查询：https://beian.miit.gov.cn/

#### 4. 备案号放置

备案成功后，在网站底部添加备案号：

```html
<div class="footer-bottom">
    <p>© 2026 农链通</p>
    <p><a href="https://beian.miit.gov.cn/">粤ICP备12345678号</a></p>
</div>
```

#### 5. 注意事项

- ⚠️ 备案期间网站无法访问
- ⚠️ 备案信息必须真实准确
- ⚠️ 网站内容需符合法律法规
- ⚠️ 变更信息需及时更新备案

### 备案时间

**总时长：** 约15-25个工作日

**费用：** 免费

---

## ❓ 常见问题

### Q1：Vercel部署后访问404？

**A：** 检查Nginx配置，确保有 `try_files $uri $uri/ /index.html;`

### Q2：GitHub Pages路由404？

**A：** 在根目录创建 `404.html`，内容同 `index.html`

### Q3：域名无法访问？

**A：**
1. 检查DNS解析是否生效（https://tool.chinaz.com/dns/）
2. 检查服务器防火墙和安全组
3. 检查Nginx配置和状态

### Q4：备案被拒绝？

**A：**
1. 检查身份证照片是否清晰
2. 检查网站名称是否合规（不能包含"中国"、"官方"等）
3. 检查网站内容是否符合要求
4. 修改后重新提交

### Q5：HTTPS证书过期？

**A：** Certbot会自动续期，执行 `certbot renew` 手动续期

### Q6：网站加载慢？

**A：**
1. 启用Gzip压缩
2. 配置静态资源缓存
3. 使用CDN加速
4. 优化图片大小

---

## 📞 技术支持

### 官方文档

- Vercel：https://vercel.com/docs
- GitHub Pages：https://docs.github.com/cn/pages
- Nginx：https://nginx.org/en/docs/
- Certbot：https://certbot.eff.org/

### 国内论坛

- 阿里云开发者社区：https://developer.aliyun.com/
- 腾讯云开发者社区：https://cloud.tencent.com/developer
- SegmentFault：https://segmentfault.com/
- CSDN：https://www.csdn.net/

### 联系我

如果遇到问题，可以随时咨询，我会提供详细的解决方案。

---

## 🎯 推荐方案总结

### 快速上线（推荐）

**选择Vercel部署：**
- ✅ 免费
- ✅ 无需备案
- ✅ 5分钟完成
- ✅ 全球加速
- ✅ 自动HTTPS

### 长期运营

**选择云服务器：**
- ✅ 稳定可控
- ✅ 功能完整
- ✅ 适合商业
- ✅ 需要备案（15-25天）
- ✅ 费用50-100元/月

---

## ✅ 部署检查清单

- [ ] 选择部署方案
- [ ] 准备GitHub仓库（如需要）
- [ ] 购买服务器/域名（如需要）
- [ ] 部署项目
- [ ] 配置域名解析（如需要）
- [ ] 申请ICP备案（国内服务器）
- [ ] 配置HTTPS（推荐）
- [ ] 测试公网访问
- [ ] 监控网站运行

---

## 🎉 开始部署

**我建议你选择 Vercel 部署，步骤简单，完全免费，无需备案。**

现在就开始吧！如有问题随时问我。

---

*最后更新：2026-01-19*
*版本：v1.0*
